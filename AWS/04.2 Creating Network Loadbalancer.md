# **Step-by-Step Guide: Creating a Network Load Balancer (NLB) in AWS**  

A **Network Load Balancer (NLB)** is ideal for high-performance, low-latency TCP/UDP traffic (e.g., gaming, VoIP, or applications requiring static IPs).  

## **Prerequisites**  
- **AWS Account** with IAM permissions for ELB/EC2  
- **EC2 Instances** running in at least **2 Availability Zones (AZs)**  
- **Security Groups & VPC** configured to allow traffic on the target ports  

---

## **Step 1: Navigate to the EC2 Dashboard**  
1. Log in to the **[AWS Management Console](https://aws.amazon.com/)**.  
2. Search for **"EC2"** or go to **Services ‚Üí Compute ‚Üí EC2**.  

---

## **Step 2: Start NLB Creation**  
1. In the left sidebar, under **"Load Balancing"**, click **"Load Balancers"**.  
2. Click **"Create Load Balancer"**.  
3. Select **"Network Load Balancer"** (second option).  

---

## **Step 3: Configure Basic Settings**  
1. **Name**: Enter a descriptive name (e.g., `my-nlb`).  
2. **Scheme**:  
   - **Internet-facing** (for public access)  
   - **Internal** (for private VPC-only traffic)  
3. **IP Address Type**:  
   - **IPv4** (default)  
   - **Dualstack** (if IPv6 support is needed)  

---

## **Step 4: Network Mapping (VPC & Subnets)**  
1. **VPC**: Select your Virtual Private Cloud.  
2. **Mappings**:  
   - Select **at least two Availability Zones (AZs)**.  
   - For each AZ, choose a **public subnet** (for internet-facing) or **private subnet** (for internal).  
   - *(Optional)* Enable **Elastic IPs** if you need static IPs.  

---

## **Step 5: Configure Listeners**  
1. **Protocol**:  
   - **TCP** (default, for reliable connections)  
   - **UDP** (for real-time applications like VoIP/gaming)  
   - **TLS** (for encrypted TCP traffic)  
2. **Port**: Enter the listening port (e.g., `80` for HTTP, `443` for HTTPS).  
3. **Default Action**:  
   - Select **"Forward to..."**  
   - Click **"Create target group"** (if not already set up).  

---

## **Step 6: Create a Target Group (if needed)**  
1. **Target Type**:  
   - **Instances** (EC2)  
   - **IP addresses** (for containers or on-prem servers)  
   - **Lambda** (if using serverless)  
2. **Name**: `my-nlb-target-group`.  
3. **Protocol & Port**: Match the listener (e.g., `TCP:80`).  
4. **VPC**: Same as the NLB.  
5. **Health Checks**:  
   - **Protocol**: TCP (or HTTP if needed).  
   - **Port**: Traffic port or custom.  
   - **Advanced**: Adjust thresholds (default: 3 healthy/unhealthy checks).  
6. Click **"Next"** ‚Üí **Register Targets**.  

---

## **Step 7: Register Targets (EC2 Instances)**  
1. Select **EC2 instances** to attach.  
2. Click **"Include as pending below"**.  
3. Click **"Create target group"**.  

---

## **Step 8: Complete NLB Creation**  
1. Back in the NLB setup, select the newly created **target group**.  
2. Review settings.  
3. Click **"Create load balancer"**.  

---

## **Step 9: Verify & Test**  
1. Wait for the NLB status to change from **"provisioning" ‚Üí "active"** (~1-2 mins).  
2. Note the **DNS name** (e.g., `my-nlb-123456789.elb.us-east-1.amazonaws.com`).  
3. **Test connectivity**:  
   ```bash
   curl http://<NLB-DNS-Name>
   nc -zv <NLB-DNS-Name> 80
   ```

---

## **Post-Setup Configuration (Optional)**  
‚úÖ **Enable Cross-Zone Load Balancing** (distributes traffic evenly across AZs).  
‚úÖ **Enable Access Logs** (for monitoring traffic).  
‚úÖ **Attach Elastic IPs** (if static IPs are required).  
‚úÖ **Integrate with Route 53** (for custom DNS).  

---

### **NLB vs. ALB vs. CLB**  
| Feature          | NLB (Layer 4) | ALB (Layer 7) | CLB (Legacy) |
|------------------|--------------|--------------|-------------|
| **Protocols**    | TCP/UDP/TLS  | HTTP/HTTPS   | HTTP/HTTPS/TCP |
| **Static IP**    | ‚úÖ Yes       | ‚ùå No        | ‚ùå No       |
| **Latency**      | Ultra-low    | Low          | Medium      |
| **Use Case**     | Gaming, VoIP, High-performance apps | Web apps, microservices | Legacy apps |

---

### **Troubleshooting**  
üîπ **No Healthy Instances?** ‚Üí Check security groups & health check settings.  
üîπ **Connection Timeout?** ‚Üí Verify NACLs & subnet routing.  
üîπ **High Latency?** ‚Üí Enable cross-zone balancing.  

---

üöÄ **Next Steps**:  
- Set up **HTTPS with TLS termination** (if using TLS listener).  
- Configure **Route 53 DNS** for a custom domain.  
- Enable **AWS WAF** for security.  
